"""
提示模板模块
包含所有配置项测试AI提取相关的提示模板
"""

# 基本提取模板
EXTRACTION_PROMPT_TEMPLATE = """
你是一个专业的需求文档分析专家，请仔细分析以下文档内容，提取出所有需求章节。

文档是一个软件需求规格说明，通常包含以下章节结构：
1. 范围
2. 引用文件
3. 需求
   3.1 基于用户的需求分析
      3.1.1 用户身份验证功能
      3.1.2 数据批量导入功能
   3.2 CSI基于需求
      3.2.1 用户身份验证功能
      3.2.2 数据批量导入功能
      ...

我需要你特别关注第3章中各级子章节下的具体需求。在配置项文档中，每个需求通常包含以下结构：
a) 标识号: 如REQ-1.1
b) 说明: 需求的详细描述
c) 进入条件: 触发需求的条件
d) 输入: 需要的输入参数
e) 输出: 产生的输出结果
f) 处理: 详细的处理步骤
g) 性能: 性能要求
h) 约束与限制: 实现限制条件

以下是文档的一部分内容：
---
{0}
---

请按照以下JSON格式返回你识别到的需求章节：
```json
{{
  "requirements": [
    {{
      "chapter_number": "3.2.1",
      "title": "用户身份验证功能",
      "content": "标识号: REQ-1.1\n\n说明：用户登录时必须通过多因素身份验证（MFA）确保安全性。\n\n进入条件：用户尝试访问系统受限资源。\n\n输入：用户名、密码、动态验证码。\n\n输出：访问令牌或错误提示。\n\n处理：验证用户名和密码，发送验证码，生成访问令牌。\n\n性能：认证响应时间 ≤ 2秒。\n\n约束与限制：支持TOTP和短信验证码。",
      "type": "requirement"
    }},
    {{
      "chapter_number": "3.2.2",
      "title": "数据批量导入功能",
      "content": "标识号: REQ-3.1\n\n说明：允许用户通过Excel文件批量导入数据。\n\n进入条件：用户选择导入文件并点击上传。\n\n输入：Excel文件（.xlsx格式）。\n\n输出：导入结果摘要，包括成功/失败记录数。\n\n处理：验证文件格式，解析数据，批量写入数据库。\n\n性能：支持最大100MB文件，处理时间正比于记录数。\n\n约束与限制：仅支持指定模板格式。",
      "type": "requirement"
    }}
  ]
}}
```

请提取完整的需求内容，确保包含需求的所有部分。请注意将内容格式化为有结构的字符串，而不是嵌套对象。
请确保提取的需求内容不要相互包含或重叠。
"""

# 续取提取模板
CONTINUATION_PROMPT_TEMPLATE = """
你是一个专业的需求文档分析专家，请仔细分析以下文档内容，继续提取所有需求章节。

文档是一个软件需求规格说明，包含多个需求章节。上一次提取已经完成了章节"{0}"，请从下一个章节开始提取，不要重复提取已处理的内容。

在配置项文档中，每个需求通常包含以下结构：
a) 标识号: 如REQ-1.1
b) 说明: 需求的详细描述
c) 进入条件: 触发需求的条件
d) 输入: 需要的输入参数
e) 输出: 产生的输出结果
f) 处理: 详细的处理步骤
g) 性能: 性能要求
h) 约束与限制: 实现限制条件

以下是文档的一部分内容：
---
{1}
---

请按照以下JSON格式返回你识别到的需求章节：
```json
{{
  "requirements": [
    {{
      "chapter_number": "3.2.x",
      "title": "需求标题",
      "content": "标识号: REQ-x.x\n\n说明：...需求详细描述\n\n进入条件：...触发条件\n\n输入：...各项输入参数\n\n输出：...结果输出\n\n处理：...处理步骤\n\n性能：...性能要求\n\n约束与限制：...实现限制",
      "type": "requirement"
    }}
  ]
}}
```

请确保提取完整的需求内容，并准确识别需求章节。请勿重复提取之前已处理的章节。
"""

# 特定需求提取模板
SPECIFIC_REQUIREMENT_PROMPT_TEMPLATE = """
你是一个专业的需求文档分析专家，请从以下文档内容中找出并提取有关"{0}"的全部内容。

这个需求可能有特定的章节标号（例如"3.2.1 用户身份验证功能"），也可能没有明确的章节标号，但内容与"{0}"直接相关。

在配置项需求文档中，每个需求通常包含以下结构：
a) 标识号: 如REQ-1.1
b) 说明: 需求的详细描述
c) 进入条件: 触发需求的条件
d) 输入: 需要的输入参数
e) 输出: 产生的输出结果
f) 处理: 详细的处理步骤
g) 性能: 性能要求
h) 约束与限制: 实现限制条件

请提取该需求的完整内容，包括所有部分。请将各部分内容格式化为有结构的字符串，不要用嵌套对象格式。

以下是文档的一部分内容：
---
{1}
---

请按照以下JSON格式返回你找到的需求内容：
```json
{{
  "requirement": {{
    "title": "需求的完整标题",
    "chapter_number": "章节号，如3.2.1",
    "content": "标识号: REQ-x.x\n\n说明：需求的内容\n\n进入条件：触发条件\n\n输入：输入参数\n\n输出：输出结果\n\n处理：处理步骤\n\n性能：性能要求\n\n约束与限制：限制条件"
  }}
}}
```

如果在当前文档片段中没有找到相关内容，请返回空内容，但保持JSON格式完整。
"""

# 特定需求续取模板
SPECIFIC_CONTINUATION_PROMPT_TEMPLATE = """
你是一个专业的需求文档分析专家，请继续从以下文档内容中找出并提取有关"{0}"的全部内容。

上一段内容中已经找到了部分相关信息，但可能不完整。请注意查找完整的需求描述，包括标识号、说明、进入条件、输入、输出、处理步骤等所有部分。

这个需求可能有特定的章节标号，也可能没有明确的章节标号。
但内容会与"{0}"直接相关。

以下是文档的另一部分内容：
---
{1}
---

请按照以下JSON格式返回你找到的需求内容：
```json
{{
  "requirement": {{
    "title": "需求的完整标题",
    "chapter_number": "章节号，如3.2.1",
    "content": "标识号: REQ-x.x\n\n说明：需求的内容\n\n进入条件：触发条件\n\n输入：输入参数\n\n输出：输出结果\n\n处理：处理步骤\n\n性能：性能要求\n\n约束与限制：限制条件"
  }}
}}
```

如果在当前文档片段中找到了完整或部分相关内容，请返回。
如果没有找到相关内容，请返回空内容，但保持JSON格式完整。
"""
